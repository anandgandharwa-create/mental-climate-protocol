<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Decision Lock ‚Äì Weighted</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:system-ui;background:#020617;color:#e5e7eb}
.container{max-width:460px;margin:auto;padding:20px}
h1{text-align:center}
.hidden{display:none}

.card{background:#0f172a;border-radius:14px;padding:16px;margin-bottom:14px}
.question{margin-bottom:10px}
.options button{
  width:48%;margin:1%;padding:10px;border:none;border-radius:10px;
  background:#334155;color:#fff;cursor:pointer
}
.options button.active{background:#22c55e;color:#022c22}

.nav{display:flex;justify-content:space-between;margin-top:20px}
.nav button{
  padding:10px 18px;border:none;border-radius:12px;
  background:#2563eb;color:#fff;cursor:pointer
}

.wheel-box{text-align:center}
#wheel{
  width:260px;height:260px;border-radius:50%;
  margin:20px auto;
  background:conic-gradient(
    #16a34a 0deg 120deg,
    #ca8a04 120deg 240deg,
    #dc2626 240deg 360deg
  );
  transition:transform 4s cubic-bezier(.17,.67,.83,.67);
}
.pointer{
  width:0;height:0;border-left:10px solid transparent;
  border-right:10px solid transparent;border-bottom:20px solid #fff;
  margin:0 auto
}
.spin-btn{
  width:100%;padding:15px;font-size:18px;border:none;
  border-radius:14px;
  background:linear-gradient(90deg,#22c55e,#38bdf8,#a855f7);
  color:#020617;font-weight:600;cursor:pointer
}
#result{margin-top:20px;padding:16px;border-radius:14px;background:#020617;text-align:center}
.cause{background:#0f172a;border-radius:14px;padding:16px;line-height:1.6}
</style>
</head>

<body>
<div class="container">

<!-- PAGE 1 -->
<div id="page1">
<h1>Decision Lock</h1>
<div id="qbox"></div>
<div class="nav">
<span></span>
<button onclick="next1()">Next ‚ñ∂</button>
</div>
</div>

<!-- PAGE 2 -->
<div id="page2" class="hidden">
<h1>Decision Spin</h1>
<div class="wheel-box">
<div class="pointer"></div>
<div id="wheel"></div>
<button class="spin-btn" onclick="spin()">üîí LOCK DECISION</button>
</div>
<div id="result"></div>
<div class="nav">
<button onclick="back1()">‚óÄ Back</button>
<button onclick="next2()">Next ‚ñ∂</button>
</div>
</div>

<!-- PAGE 3 -->
<div id="page3" class="hidden">
<h1>Decision Cause</h1>
<div class="cause" id="causeText"></div>
<div class="nav">
<button onclick="back2()">‚óÄ Back</button>
<span></span>
</div>
</div>

</div>

<script>
/* MASTER QUESTION POOL WITH WEIGHT */
const pool = [
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ö‡§≠‡•Ä ‡§•‡§ï‡•á ‡§π‡•Å‡§è ‡§π‡•à‡§Ç?", w:1},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ö‡§∏‡•ç‡§•‡§ø‡§∞ ‡§π‡•à‡§Ç?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§á‡§∏ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§∏‡•á ‡§°‡§∞ ‡§ú‡•Å‡§°‡§º‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§¨‡§¶‡§≤‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ?", w:3},   // HEAVY
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•ã ‡§≤‡§Ç‡§¨‡•á ‡§∏‡§Æ‡§Ø ‡§§‡§ï ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡•á‡§ó‡§æ?", w:3}, // HEAVY
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à?", w:1},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§™‡•à‡§∏‡§æ ‡§Ø‡§æ ‡§ï‡§∞‡§ø‡§Ø‡§∞ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§™‡•Ç‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§π‡•à‡§Ç?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡•á ‡§®‡§æ‡§∞‡§æ‡§ú‡§º ‡§π‡•à‡§Ç?", w:1},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§Ü‡§™‡§ï‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´ ‡§π‡•à?", w:3}, // HEAVY
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∂‡§æ‡§Ç‡§§‡§ø ‡§∏‡•á ‡§∏‡•ã‡§ö ‡§™‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§Ü‡§™‡§ï‡•ã ‡§°‡§∞‡§æ ‡§∞‡§π‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ö‡§≠‡•Ä ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?", w:1},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§™‡§π‡•Å‡§Å‡§ö‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?", w:3}, // HEAVY
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§¶‡§¨‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•à‡§Ç?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§®‡•á ‡§™‡§π‡§≤‡•á ‡§ê‡§∏‡§æ ‡§™‡§õ‡§§‡§æ‡§Ø‡§æ ‡§π‡•à?", w:2},
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§Ö‡§π‡§Ç‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§π‡•à?", w:3}, // HEAVY
{q:"‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§Ö‡§≠‡•Ä ‡§ü‡§≤ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?", w:1}
];

/* PICK RANDOM 5 */
let selected = pool.sort(()=>0.5-Math.random()).slice(0,5);
let answers = Array(5).fill(null);

/* RENDER */
const qbox=document.getElementById("qbox");
selected.forEach((obj,i)=>{
  qbox.innerHTML+=`
  <div class="card">
    <div class="question">${i+1}Ô∏è‚É£ ${obj.q}</div>
    <div class="options">
      <button onclick="ans(${i},1,this)">‡§π‡§æ‡§Å</button>
      <button onclick="ans(${i},0,this)">‡§®‡§π‡•Ä‡§Ç</button>
    </div>
  </div>`;
});

function ans(i,v,btn){
  answers[i]=v;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

/* NAV */
function next1(){
  if(answers.includes(null)){alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§∏‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§Ç");return;}
  page1.classList.add("hidden");page2.classList.remove("hidden");
}
function back1(){page2.classList.add("hidden");page1.classList.remove("hidden")}
function next2(){page2.classList.add("hidden");page3.classList.remove("hidden")}
function back2(){page3.classList.add("hidden");page2.classList.remove("hidden")}

/* SOUND */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function tone(f,d){
  const o=audioCtx.createOscillator(),g=audioCtx.createGain();
  o.connect(g);g.connect(audioCtx.destination);
  o.frequency.value=f;o.start();
  g.gain.setValueAtTime(0.2,audioCtx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+d/1000);
  o.stop(audioCtx.currentTime+d/1000);
}

/* SPIN WITH WEIGHT */
let angle=0;
function spin(){
  navigator.vibrate(100);tone(300,200);

  let score=0;
  answers.forEach((v,i)=>{
    if(v===1) score += selected[i].w;
  });

  let stop,decision,vibe,freq;
  if(score<=3){
    stop=60;decision="üü¢ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§≤‡•á‡§®‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à";vibe=150;freq=700;
  }else if(score<=6){
    stop=180;decision="üü° 24 ‡§ò‡§Ç‡§ü‡•á ‡§∞‡•Å‡§ï‡§®‡§æ ‡§¨‡•á‡§π‡§§‡§∞ ‡§π‡•ã‡§ó‡§æ";vibe=300;freq=400;
  }else{
    stop=300;decision="üî¥ ‡§Ö‡§≠‡•Ä ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§® ‡§≤‡•á‡§Ç";vibe=600;freq=200;
  }

  angle=360*4+stop;
  wheel.style.transform=`rotate(${angle}deg)`;

  setTimeout(()=>{
    navigator.vibrate(vibe);tone(freq,400);
    result.innerText=decision;

    let c="<strong>‡§Ø‡§π ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Ü‡§Ø‡§æ?</strong><br><br>";
    answers.forEach((v,i)=>{
      if(v===1){
        c+=`‚Ä¢ ${selected[i].q} (weight ${selected[i].w})<br>`;
      }
    });
    causeText.innerHTML=c;
  },4000);
}
</script>

</body>
</html>
